(this["webpackJsonpstranger-tthings"]=this["webpackJsonpstranger-tthings"]||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(21),a=n.n(s),c=n(10),o=n(4),i=n(3),u=n(0),j=function(){return Object(u.jsxs)("div",{className:"landing",children:[Object(u.jsx)("h1",{children:"Welcome to Strangers Things"}),Object(u.jsx)("p",{children:"Here at strangers things we list posts for sale for users to buy "}),Object(u.jsx)("p",{children:"we have the worlds largest selection of totally legal and legit offers from real people"})]})},l=n(2),p=n(6),b="https://strangers-things.herokuapp.com/api/2204-FTB-MT-WEB-PT",d=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t){var n,r,s,a,c,o=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"GET",r=o.length>2?o[2]:void 0,s=o.length>3?o[3]:void 0,e.prev=3,e.next=6,fetch(b+t,h(n,s,r));case 6:return c=e.sent,e.next=9,c.json();case 9:if(!(a=e.sent).error){e.next=12;break}throw a.error;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e,t,n){return n?{method:e.toUpperCase(),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)}:{method:e.toUpperCase(),headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}},O=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t,n,r){var s,a,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return e.next=3,d("/users/register","POST",null,{user:{username:t,password:n}});case 3:a=e.sent,s=a,e.next=11;break;case 7:return e.next=9,d("/users/login","POST",null,{user:{username:t,password:n}});case 9:c=e.sent,s=c;case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),f=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("/posts","GET",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t,n,r){var s,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b+t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({message:{content:"".concat(r)}})});case 2:return s=e.sent,e.next=5,s.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t,n,r,s){var a,c,o,i=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>4&&void 0!==i[4]&&i[4],e.next=3,fetch(b+"/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({post:{title:"".concat(n),description:"".concat(r),price:"$".concat(s),willDeliver:"".concat(a)}})});case 3:return c=e.sent,e.next=6,c.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,s){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t,n){var r,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b+"/posts/".concat(n),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:return r=e.sent,e.next=5,r.json();case 5:return s=e.sent,console.log(s),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t){var n,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b+"/users/me",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t,n=e.User,s=e.setUser,a=e.token,c=e.setToken,i=e.UserData,j=e.setUserData,b=Object(r.useState)(""),d=Object(o.a)(b,2),h=d[0],f=d[1],x=Object(r.useState)(""),m=Object(o.a)(x,2),v=m[0],w=m[1],y=Object(r.useState)(!1),k=Object(o.a)(y,2),S=k[0],C=k[1],P=function(){s(!1),c("")},U=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t){var n,r,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!S){e.next=9;break}return e.next=4,O(h,v,S);case 4:n=e.sent,s(h),c(n.data.token),e.next=18;break;case 9:return e.next=11,O(h,v,S);case 11:return r=e.sent,s(h),c(r.data.token),e.next=16,g(r.data.token);case 16:a=e.sent,j(a.data);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){C(!S)};return Object(u.jsx)(u.Fragment,{children:a?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"User profile"}),Object(u.jsxs)("p",{children:[n," is logged in "]}),Object(u.jsx)("button",{onSubmit:P,onClick:function(e){return P(e.target.value)},children:"logout"}),Object(u.jsx)("h2",{children:"Your Recents Sent messages"}),i&&i.messages.map((function(e,t){return Object(u.jsxs)("ul",{className:"posts",children:[Object(u.jsxs)("h3",{children:["Post: ",e.post.title]}),Object(u.jsxs)("div",{children:["message: ",e.content]})]},"".concat(e._id," ").concat(t))})),Object(u.jsx)("h2",{children:"My recived messages"}),n&&a&&(null===(t=i.messages)||void 0===t?void 0:t.map((function(e,t){if(e.fromUser._id!==i._id)return Object(u.jsxs)("div",{className:"posts",children:[Object(u.jsxs)("div",{children:["Sender: ",e.fromUser.username]}),Object(u.jsxs)("div",{children:["Message: ",e.content]})]},t)})))]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:S?"Registration":"Login"}),Object(u.jsxs)("form",{onSubmit:U,children:[Object(u.jsx)("input",{onChange:function(e){return f(e.target.value)},name:"username",type:"text",placeholder:"username"}),Object(u.jsx)("input",{onChange:function(e){return w(e.target.value)},required:!0,name:"password",type:"password",placeholder:"password",value:v}),Object(u.jsx)("button",{type:"submit",children:"submit"})]}),Object(u.jsx)("button",{onSubmit:D,onClick:function(e){return D(e.target.value)},children:"Register/login"})]})})},y=n(14),k=function(e){var t=e.User,n=e.token,s=e.posts,a=e.setPosts,c=e.search,j=e.setSearch,b=(e.featuredPosts,e.setfeaturedPosts),d=e.UserData,h=(e.setUserData,Object(i.e)()),O=Object(r.useState)(""),x=Object(o.a)(O,2),g=x[0],w=x[1],k=Object(r.useState)(""),S=Object(o.a)(k,2),C=S[0],P=S[1],U=Object(r.useState)(""),D=Object(o.a)(U,2),T=D[0],N=D[1],_=Object(r.useState)(!1),A=Object(o.a)(_,2),B=A[0],E=A[1];Object(r.useEffect)((function(){Object(p.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(n);case 2:t=e.sent,a(t.data.posts);case 4:case"end":return e.stop()}}),e)})))()}),[]);var F=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,m(n,g,C,T,B);case 3:r=e.sent,a([r.data.post].concat(Object(y.a)(s)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t,r){var s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),!window.confirm("Are you sure?")){e.next=6;break}return e.next=4,v(n,r._id);case 4:s=e.sent,a.apply(void 0,[s.data.posts].concat(Object(y.a)(r)));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Posts"}),Object(u.jsx)("input",{onChange:function(e){j(e.target.value)},type:"test",name:"search",placeholder:"search"}),n&&t&&Object(u.jsxs)("form",{onSubmit:F,className:"newpostform",children:[Object(u.jsx)("h1",{children:"Submit a new post"}),Object(u.jsx)("input",{onChange:function(e){return w(e.target.value)},type:"text",name:"title",placeholder:"Title",value:g}),Object(u.jsx)("input",{onChange:function(e){return P(e.target.value)},type:"text",name:"description",placeholder:"Description",value:C}),Object(u.jsx)("input",{onChange:function(e){return N(e.target.value)},type:"number",name:"price",placeholder:"$Price",value:T}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"willDeliver?"}),Object(u.jsx)("input",{onChange:function(e){return E(!0)},type:"radio",name:"willDeliver",placeholder:"willDeliver",value:B})]})," ",Object(u.jsx)("button",{type:"submit",children:"Submit Post"})]}),Object(u.jsx)("ul",{children:s.filter((function(e){return"".concat(e.location," ").concat(e.description).toLowerCase().includes(c.toLowerCase())})).map((function(e){return Object(u.jsxs)("div",{onClick:function(r){return function(e,r){b(r),t&&n?h.push("/posts/".concat(r._id)):alert("you need to be logged in to view posts")}(0,e)},className:"posts",children:[Object(u.jsx)("h3",{children:e.title}),Object(u.jsx)("div",{children:e.description}),Object(u.jsx)("div",{children:e.price}),n&&e.author._id==d._id&&Object(u.jsx)("button",{onClick:function(t){return J(t,e)},children:"Delete"})]},e._id)}))})]})},S=function(e){var t=e.User,n=e.token,s=e.featuredPosts,a=e.setfeaturedPosts,c=e.UserData,j=(e.setUserData,e.comments,e.setComments,Object(r.useState)("")),b=Object(o.a)(j,2),d=(b[0],b[1],Object(r.useState)("")),h=Object(o.a)(d,2),O=h[0],f=h[1],m=Object(i.e)(),g=(Object(i.f)().postsId,function(){var e=Object(p.a)(Object(l.a)().mark((function e(t){var r,c,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,x("/posts/".concat(s._id,"/messages"),n,O);case 3:r=e.sent,c=[r.data.message].concat(Object(y.a)(s.messages)),o=Object.assign(s,{messages:c}),a(o),f(""),console.log("update post",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());console.log(s);var w=function(){var e=Object(p.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),window.confirm("Are you sure?")&&v(n,s._id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("article",{className:"FeaturedPost",children:[Object(u.jsx)("h1",{children:s.title}),Object(u.jsx)("p",{children:s.description}),Object(u.jsxs)("p",{children:["Posted by: ",s.author.username]}),Object(u.jsx)("p",{children:s.me}),Object(u.jsxs)("section",{children:[Object(u.jsx)("h2",{children:"Comments"}),Object(u.jsx)("ul",{children:s.messages&&s.messages.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsxs)("span",{children:[e.content," posted by: ",e.fromUser.username]})},e._id)}))})]}),t&&n&&Object(u.jsxs)("form",{onSubmit:g,children:[Object(u.jsx)("input",{onChange:function(e){return f(e.target.value)},type:"text",name:"comment",placeholder:"comment",value:O}),Object(u.jsx)("button",{type:"submit",children:"Submit Comment"})]}),t&&n&&s.author._id==c._id&&Object(u.jsx)("button",{onClick:w,children:"Delete"}),Object(u.jsx)("button",{onClick:function(e){a(!1),m.push("/posts")},children:"Close"})]})})},C=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(""),l=Object(o.a)(a,2),p=l[0],b=l[1],d=Object(r.useState)(!1),h=Object(o.a)(d,2),O=h[0],f=h[1],x=Object(r.useState)([]),m=Object(o.a)(x,2),v=m[0],g=m[1],y=Object(r.useState)(!1),C=Object(o.a)(y,2),P=C[0],U=C[1],D=Object(r.useState)(""),T=Object(o.a)(D,2),N=T[0],_=T[1],A=Object(r.useState)(!1),B=Object(o.a)(A,2),E=B[0],F=B[1];return Object(u.jsxs)("main",{children:[Object(u.jsxs)("div",{className:"navbar",children:[Object(u.jsx)(c.b,{exact:!0,to:"/",className:"navlink",activeClassName:"active",children:"Home"}),Object(u.jsx)(c.b,{exact:!0,to:"/posts",className:"navlink",activeClassName:"active",children:"Posts"}),Object(u.jsx)(c.b,{exact:!0,to:"/login",className:"navlink",activeClassName:"active",children:"Account"})]}),Object(u.jsx)(i.a,{exact:!0,path:"/",children:Object(u.jsx)(j,{})}),Object(u.jsxs)(i.a,{path:"/posts",children:[Object(u.jsx)(i.a,{path:"/posts/:postsId",children:P&&N&&O&&Object(u.jsx)(S,{User:P,token:N,featuredPosts:O,setfeaturedPosts:f,UserData:E,setUserData:F,comments:v,setComments:g})}),Object(u.jsx)(k,{User:P,token:N,featuredPosts:O,setfeaturedPosts:f,posts:n,setPosts:s,search:p,setSearch:b,UserData:E,setUserData:F})]}),Object(u.jsx)(i.a,{path:"/login",children:Object(u.jsx)(w,{User:P,setUser:U,token:N,setToken:_,featuredPosts:O,setfeaturedPosts:f,UserData:E,setUserData:F})})]})};n(33);a.a.render(Object(u.jsx)(c.a,{children:Object(u.jsx)(C,{})}),document.getElementById("app"))}},[[34,1,2]]]);
//# sourceMappingURL=main.456b5754.chunk.js.map